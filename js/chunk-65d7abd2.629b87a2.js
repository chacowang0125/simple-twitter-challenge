(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65d7abd2"],{"0d4e":function(e,t,a){e.exports=a.p+"img/exit-icon.59e5a2e5.svg"},"51b5":function(e,t,a){"use strict";a("d409")},"65d2":function(e,t,a){},"92fe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("Navbar"),a("div",{staticClass:"main-container"},[e.isLoading?a("Spinner"):e._e(),e.isLoading?e._e():a("UserFollowedFeed",{attrs:{followers:e.followers,userTweetsCount:e.userTweetsCount,user:e.user},on:{"update-followed":e.updateFollowed}})],1),a("PopularBar",{attrs:{"initial-top-users":e.topUsers},on:{"after-follow-click":e.afterFollowClick}}),a("div",{staticClass:"modal"},[a("CreateNewTweetModal",{directives:[{name:"show",rawName:"v-show",value:e.openCreateNewTweetModal,expression:"openCreateNewTweetModal"}],on:{"after-add-tweet":e.afterAddTweet}})],1)],1)},s=[],n=a("5530"),i=a("1da1"),o=(a("96cf"),a("d000")),c=a("7950"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"page-title"},[r("router-link",{attrs:{to:{name:"tweet",params:{id:e.user.id}}}},[r("img",{staticClass:"profile-topnav-icon",attrs:{src:a("0d4e")}})]),r("div",{staticClass:"page-title-name"},[r("div",{staticClass:"name"},[e._v(e._s(e._f("nameLength")(e.user.name)))]),r("div",{staticClass:"tweets"},[e._v(e._s(e.userTweetsCount)+"推文")])])],1),r("div",{staticClass:"page-banner"},[r("router-link",{attrs:{to:{name:"user-followed",params:{id:e.user.id}}}},[r("div",{staticClass:"page-banner-followed active"},[e._v("跟隨者")])]),r("router-link",{attrs:{to:{name:"user-following",params:{id:e.user.id}}}},[r("div",{staticClass:"page-banner-following"},[e._v("正在跟隨")])])],1),r("div",{staticClass:"page-list"},e._l(e.followers,(function(t){return r("li",{key:t.id,staticClass:"list-card"},[r("div",{staticClass:"list-card-avatar"},[r("router-link",{attrs:{to:{name:"tweet",params:{id:t.followerId}}}},[r("img",{attrs:{src:e._f("emptyImage")(t.avatar),alt:"user-avatar"}})])],1),r("div",{staticClass:"list-card-content"},[r("div",{staticClass:"list-card-content-header"},[r("div",{staticClass:"name"},[e._v(e._s(e._f("nameLength")(t.name)))]),r("div",{staticClass:"account"},[r("span",[e._v("@")]),e._v(" "+e._s(e._f("nameLength")(t.account))+" ")]),t.followerId!==e.currentUser.id?r("div",[t.isFollowed?r("button",{staticClass:"list-card-button following",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.deleteFollow(t.followerId)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"list-card-button follow",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.addFollow(t.followerId)}}},[e._v(" 跟隨 ")])]):e._e()]),r("div",{staticClass:"list-card-content-description"},[e._v(" "+e._s(t.introduction)+" ")])])])})),0)])},u=[],d=a("2f62"),w=a("4cce"),f=a("2fa3"),p=a("2708"),v={name:"UserFollowingFeed",props:["followers","userTweetsCount","user"],mixins:[p["b"],p["d"]],data:function(){return{currentRouteName:"followed"}},methods:{addFollow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w["a"].addFollow({userId:e});case 3:if(r=a.sent,s=r.data,"success"===s.status){a.next=7;break}throw new Error(s.message);case 7:f["a"].fire({icon:"success",title:"成功追蹤此使用者"}),t.$emit("update-followed"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),f["a"].fire({icon:"warning",title:"無法追蹤此使用者，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},deleteFollow:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w["a"].deleteFollow({userId:e});case 3:if(r=a.sent,s=r.data,"success"===s.status){a.next=7;break}throw new Error(s.message);case 7:f["a"].fire({icon:"success",title:"成功取消追蹤此使用者"}),t.$emit("update-followed"),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),f["a"].fire({icon:"warning",title:"無法取消追蹤此使用者，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}},toggleTab:function(e){this.currentRouteName=e},computed:Object(n["a"])({},Object(d["d"])(["currentUser"]))},h=v,g=(a("b8bf"),a("2877")),m=Object(g["a"])(h,l,u,!1,null,"51038d4c",null),b=m.exports,C=a("2791"),k=a("2375"),_={name:"UserFollowed",components:{Navbar:o["a"],UserFollowedFeed:b,PopularBar:c["a"],CreateNewTweetModal:C["a"],Spinner:k["a"]},data:function(){return{user:"",followers:[],topUsers:[],userTweetsCount:"",isLoading:!0}},methods:{getUser:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w["a"].getUser({userId:e});case 3:r=a.sent,t.user=r.data,t.isLoading=!1,a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](0),t.isLoading=!1,f["a"].fire({icon:"warning",title:"無法取得使用者資料請後再試"});case 12:case"end":return a.stop()}}),a,null,[[0,8]])})))()},fetchTopUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w["a"].getTopUsers();case 3:a=t.sent,r=a.data,e.topUsers=r,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),f["a"].fire({icon:"warning",title:"無法取得資料請稍後再試"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},fetchFollowers:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,w["a"].getFollowers({userId:e});case 4:r=a.sent,s=r.data,t.followers=s,t.isLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),t.isLoading=!1,f["a"].fire({icon:"warning",title:"無法取得跟隨者資料，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},fetchTotaltweets:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isLoading=!0,a.next=4,w["a"].getTotalTweets({userId:e});case 4:r=a.sent,s=r.data,t.userTweetsCount=s.length,t.isLoading=!1,a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),t.isLoading=!1,f["a"].fire({icon:"warning",title:"無法取得所有推文資料，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},updateFollowed:function(){var e=this.$route.params.id;this.fetchFollowers(e),this.fetchTopUsers(),this.isLoading=!1},afterFollowClick:function(){this.fetchFollowers(this.user.id),this.fetchTopUsers(),this.isLoading=!1},afterAddTweet:function(){this.$store.commit("toggleCreateNewTweetModal"),this.$router.push("/")}},created:function(){var e=this.$route.params.id;this.fetchFollowers(e),this.getUser(e),this.fetchTotaltweets(e),this.fetchTopUsers()},computed:Object(n["a"])({},Object(d["d"])(["openCreateNewTweetModal"]))},x=_,T=(a("51b5"),Object(g["a"])(x,r,s,!1,null,"6529a882",null));t["default"]=T.exports},b8bf:function(e,t,a){"use strict";a("65d2")},d409:function(e,t,a){}}]);
//# sourceMappingURL=chunk-65d7abd2.629b87a2.js.map